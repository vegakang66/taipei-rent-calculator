<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ  ç¤¾å®…å»ºè­°ç§Ÿé‡‘è¨ˆç®—æ©Ÿ</title>
    <style>
        :root {
            --color-primary: #667eea;
            --color-primary-dark: #764ba2;
            --color-bg: #f8f9fa;
            --color-text: #333;
            --color-text-light: #666;
            --color-white: #ffffff;
            --color-border: #e0e0e0;
            --color-success: #4CAF50;
            --color-neutral: #f0f0f0;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg: #1a1a1a;
                --color-text: #f0f0f0;
                --color-text-light: #999;
                --color-white: #2a2a2a;
                --color-border: #444;
                --color-neutral: #333;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: var(--color-bg);
            min-height: 100vh;
            padding: 20px;
            color: var(--color-text);
            transition: background 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: var(--color-primary);
            margin-bottom: 30px;
            animation: slideDown 0.6s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--color-primary);
        }

        .header p {
            font-size: 1.1em;
            font-weight: 300;
            color: var(--color-text-light);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            .header h1 {
                font-size: 1.8em;
            }
        }

        .form-card, .result-card {
            background: var(--color-white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            animation: fadeIn 0.8s ease;
            border: 1px solid var(--color-border);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--color-text);
            font-size: 0.95em;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            transition: all 0.3s ease;
            color: var(--color-text);
            background: var(--color-white);
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .range-slider {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .range-slider input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(to right, var(--color-primary), var(--color-primary-dark));
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .range-slider input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .range-slider input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .range-value {
            min-width: 50px;
            text-align: center;
            font-weight: 600;
            color: var(--color-primary);
        }

        .result-card h2 {
            font-size: 1.3em;
            color: var(--color-text);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--color-border);
        }

        .result-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--color-border);
        }

        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .result-label {
            display: flex;
            align-items: center;
            font-size: 0.95em;
            color: var(--color-text-light);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .result-label span:first-child {
            font-size: 1.3em;
            margin-right: 8px;
        }

        .result-value {
            font-size: 1.4em;
            font-weight: 700;
            color: var(--color-primary);
            word-break: break-word;
        }

        .rental-summary {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: var(--color-white);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        .rental-summary label {
            display: block;
            font-size: 0.9em;
            opacity: 0.95;
            margin-bottom: 10px;
        }

        .rental-price {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
            color: white;
        }

        .buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-copy {
            background: #4CAF50;
            color: white;
        }

        .btn-copy:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-reset {
            background: var(--color-neutral);
            color: var(--color-text);
        }

        .btn-reset:hover {
            background: var(--color-border);
            transform: translateY(-2px);
        }

        .note {
            margin-top: 15px;
            font-size: 0.9em;
            color: var(--color-text-light);
            line-height: 1.6;
        }

        .note strong {
            color: var(--color-text);
        }

        .success-message {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 12px 15px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .success-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ  ç¤¾å®…å»ºè­°ç§Ÿé‡‘è¨ˆç®—æ©Ÿ</h1>
            <p>æ˜Ÿé´»å°åŒ—åœ˜éšŠ - å°ˆæ¥­ç§Ÿé‡‘è©•ä¼°å·¥å…·</p>
        </div>

        <div class="main-content">
            <!-- è¡¨å–®å€ -->
            <div class="form-card">
                <div class="form-group">
                    <label for="buildingType">å»ºç‰©å‹æ…‹</label>
                    <select id="buildingType">
                        <option value="wholeHouse">æ•´å±¤(æ£Ÿ)ä½å®¶</option>
                        <option value="studio">ç¨ç«‹å¥—æˆ¿(15åªä»¥ä¸‹)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="area">åªæ•¸</label>
                    <input type="number" id="area" min="1" max="100" value="20" placeholder="è¼¸å…¥åªæ•¸">
                </div>

                <div class="form-group">
                    <label for="district">è¡Œæ”¿å€</label>
                    <select id="district">
                        <option value="daan">å¤§å®‰å€</option>
                        <option value="zhongshan">ä¸­å±±å€</option>
                        <option value="zhongzheng">ä¸­æ­£å€</option>
                        <option value="xinyi">ä¿¡ç¾©å€</option>
                        <option value="datong">å¤§åŒå€</option>
                        <option value="songshan">æ¾å±±å€</option>
                        <option value="nangang">å—æ¸¯å€</option>
                        <option value="wanhua">è¬è¯å€</option>
                        <option value="shilin">å£«æ—å€</option>
                        <option value="neihu">å…§æ¹–å€</option>
                        <option value="wenshan">æ–‡å±±å€</option>
                        <option value="beitou">åŒ—æŠ•å€</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="age">å±‹é½¡</label>
                    <select id="age">
                        <option value="0">0-5å¹´</option>
                        <option value="1">5-10å¹´</option>
                        <option value="2">10-15å¹´</option>
                        <option value="3">15-20å¹´</option>
                        <option value="4">20-25å¹´</option>
                        <option value="5">25-30å¹´</option>
                        <option value="6">30-40å¹´</option>
                        <option value="7">40å¹´ä»¥ä¸Š</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="renovation">è£ä¿®èª¿æ•´ç‡</label>
                    <select id="renovation">
                        <option value="0">ç„¡è£ä¿® (0%)</option>
                        <option value="3">ç°¡æ˜“è£ä¿® (3%)</option>
                        <option value="5">ä¸­ç­‰è£ä¿® (5%)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="location">å€ä½èª¿æ•´ç‡</label>
                    <select id="location">
                        <option value="0">ä¸­ä¸‹å€ä½ (0%)</option>
                        <option value="3">ä¸­ä¸Šå€ä½ (3%)</option>
                        <option value="5">å„ªè³ªå€ä½ (5%)</option>
                    </select>
                </div>
            </div>

            <!-- çµæœå€ -->
            <div class="result-card">
                <h2>è¨ˆç®—çµæœ</h2>
                
                <div class="rental-summary">
                    <label>å»ºè­°ç§Ÿé‡‘ï¼ˆæœˆï¼‰</label>
                    <div class="rental-price" id="rentDisplay">NT$ 0</div>
                    <div class="buttons">
                        <button class="btn btn-copy" onclick="copyRental()">ğŸ“‹ è¤‡è£½ç§Ÿé‡‘</button>
                        <button class="btn btn-reset" onclick="resetForm()">ğŸ”„ é‡ç½®</button>
                    </div>
                    <div class="success-message" id="successMessage">âœ“ å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿</div>
                </div>

                <h3 style="margin-top: 25px; margin-bottom: 15px; color: var(--color-text); font-size: 1.1em;">è¨ˆç®—æ˜ç´°</h3>
                
                <div class="result-item">
                    <div class="result-label">
                        <span>1ï¸âƒ£</span>
                        <span>å–®åªåƒ¹æ ¼ï¼ˆè¡Œæ”¿å€å–®åƒ¹ï¼‰</span>
                    </div>
                    <div class="result-value" id="unitPrice">NT$ 0/åª</div>
                </div>

                <div class="result-item">
                    <div class="result-label">
                        <span>2ï¸âƒ£</span>
                        <span>ç¸½èª¿æ•´ç‡ï¼ˆè£ä¿® + å€ä½ï¼‰</span>
                    </div>
                    <div class="result-value" id="totalRate">0%</div>
                </div>

                <div class="result-item">
                    <div class="result-label">
                        <span>3ï¸âƒ£</span>
                        <span>èª¿æ•´å¾Œå–®åªåƒ¹æ ¼</span>
                    </div>
                    <div class="result-value" id="adjustedPrice">NT$ 0/åª</div>
                </div>

                <div class="result-item">
                    <div class="result-label">
                        <span>4ï¸âƒ£</span>
                        <span>å»ºè­°ç§Ÿé‡‘ï¼ˆèª¿æ•´å¾Œå–®åª Ã— åªæ•¸ï¼‰</span>
                    </div>
                    <div class="result-value" id="suggestedRental">NT$ 0</div>
                </div>

                <div class="note">
                    <strong>ğŸ’¡ æç¤ºï¼š</strong>å»ºè­°ç§Ÿé‡‘å·²æ ¹æ“šå»ºç‰©å‹æ…‹ã€è¡Œæ”¿å€ã€å±‹é½¡ã€è£ä¿®ç‹€æ³åŠå€ä½å„ªå‹¢é€²è¡Œç¶œåˆè©•ä¼°ã€‚å¯¦éš›ç§Ÿé‡‘å¯èƒ½å› å¸‚å ´ç‹€æ³è€Œæœ‰æ‰€èª¿æ•´ã€‚
                </div>
            </div>
        </div>
    </div>

    <script>
        // å°åŒ—å¸‚è¡¨å››å’Œè¡¨äº”çš„æ•¸æ“š
        const priceTable = {
            wholeHouse: {
                daan: [1725, 1715, 1695, 1670, 1640, 1605, 1575, 1500],
                zhongshan: [1725, 1715, 1695, 1670, 1640, 1605, 1575, 1500],
                zhongzheng: [1705, 1690, 1675, 1645, 1615, 1585, 1555, 1480],
                xinyi: [1705, 1690, 1675, 1645, 1615, 1585, 1555, 1480],
                datong: [1680, 1665, 1650, 1625, 1595, 1565, 1535, 1460],
                songshan: [1680, 1665, 1650, 1625, 1595, 1565, 1535, 1460],
                nangang: [1545, 1530, 1515, 1490, 1465, 1435, 1410, 1340],
                wanhua: [1545, 1530, 1515, 1490, 1465, 1435, 1410, 1340],
                shilin: [1495, 1485, 1470, 1445, 1420, 1395, 1365, 1300],
                neihu: [1495, 1485, 1470, 1445, 1420, 1395, 1365, 1300],
                wenshan: [1415, 1405, 1390, 1370, 1345, 1320, 1295, 1230],
                beitou: [1415, 1405, 1390, 1370, 1345, 1320, 1295, 1230]
            },
            studio: {
                daan: [2475, 2435, 2390, 2350, 2290, 2225, 2165, 2060],
                zhongshan: [2365, 2325, 2290, 2250, 2190, 2130, 2070, 1970],
                zhongzheng: [2175, 2140, 2100, 2065, 2010, 1955, 1905, 1810],
                xinyi: [2220, 2185, 2150, 2110, 2055, 2000, 1945, 1850],
                datong: [2160, 2125, 2090, 2055, 2000, 1945, 1890, 1800],
                songshan: [2305, 2270, 2230, 2190, 2135, 2075, 2020, 1920],
                nangang: [2160, 2125, 2090, 2055, 2000, 1945, 1890, 1800],
                wanhua: [2160, 2125, 2090, 2055, 2000, 1945, 1890, 1800],
                shilin: [2040, 2010, 1975, 1940, 1890, 1840, 1785, 1700],
                neihu: [2040, 2010, 1975, 1940, 1890, 1840, 1785, 1700],
                wenshan: [1920, 1890, 1860, 1825, 1780, 1730, 1680, 1600],
                beitou: [1920, 1890, 1860, 1825, 1780, 1730, 1680, 1600]
            }
        };

        const elements = {
            buildingType: document.getElementById('buildingType'),
            area: document.getElementById('area'),
            district: document.getElementById('district'),
            age: document.getElementById('age'),
            renovation: document.getElementById('renovation'),
            renovationValue: document.getElementById('renovationValue'),
            location: document.getElementById('location'),
            locationValue: document.getElementById('locationValue'),
            unitPrice: document.getElementById('unitPrice'),
            totalRate: document.getElementById('totalRate'),
            adjustedPrice: document.getElementById('adjustedPrice'),
            suggestedRental: document.getElementById('suggestedRental'),
            rentDisplay: document.getElementById('rentDisplay'),
            successMessage: document.getElementById('successMessage')
        };

        function calculate() {
            const buildingType = elements.buildingType.value;
            const district = elements.district.value;
            const ageIndex = parseInt(elements.age.value);
            const area = parseFloat(elements.area.value) || 0;
            const renovationRate = parseInt(elements.renovation.value) / 100;
            const locationRate = parseInt(elements.location.value) / 100;

            // 1ï¸âƒ£ å–®åªåƒ¹æ ¼
            const unitPrice = priceTable[buildingType][district][ageIndex];
            
            // 2ï¸âƒ£ ç¸½èª¿æ•´ç‡
            const totalRate = renovationRate + locationRate;
            const totalRatePercent = Math.round(totalRate * 100);

            // 3ï¸âƒ£ èª¿æ•´å¾Œå–®åªåƒ¹æ ¼
            const adjustedPrice = Math.round(unitPrice * (1 + totalRate));

            // 4ï¸âƒ£ å»ºè­°ç§Ÿé‡‘
            const suggestedRental = Math.round(adjustedPrice * area);

            // æ›´æ–°é¡¯ç¤º
            elements.unitPrice.textContent = `NT$ ${unitPrice.toLocaleString('zh-TW')}/åª`;
            elements.totalRate.textContent = `${totalRatePercent}%`;
            elements.adjustedPrice.textContent = `NT$ ${adjustedPrice.toLocaleString('zh-TW')}/åª`;
            elements.suggestedRental.textContent = `NT$ ${suggestedRental.toLocaleString('zh-TW')}`;
            elements.rentDisplay.textContent = `NT$ ${suggestedRental.toLocaleString('zh-TW')}`;
        }

        function updateRenovationDisplay() {
            elements.renovationValue.textContent = elements.renovation.value;
            calculate();
        }

        function updateLocationDisplay() {
            elements.locationValue.textContent = elements.location.value;
            calculate();
        }

        function copyRental() {
            const rentText = elements.rentDisplay.textContent;
            navigator.clipboard.writeText(rentText).then(() => {
                elements.successMessage.classList.add('show');
                setTimeout(() => {
                    elements.successMessage.classList.remove('show');
                }, 2000);
            });
        }

        function resetForm() {
            elements.buildingType.value = 'wholeHouse';
            elements.area.value = '20';
            elements.district.value = 'daan';
            elements.age.value = '0';
            elements.renovation.value = '0';
            elements.renovationValue.textContent = '0';
            elements.location.value = '0';
            elements.locationValue.textContent = '0';
            calculate();
        }

        // äº‹ä»¶ç›£è½
        elements.buildingType.addEventListener('change', calculate);
        elements.area.addEventListener('input', calculate);
        elements.district.addEventListener('change', calculate);
        elements.age.addEventListener('change', calculate);
        elements.renovation.addEventListener('change', calculate);
        elements.location.addEventListener('change', calculate);

        // åˆå§‹è¨ˆç®—
        calculate();
    </script>
</body>
</html>
